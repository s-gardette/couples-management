<!-- Enhanced Admin Sidebar -->
<aside class="flex-shrink-0 w-64 bg-gradient-to-b from-gray-900 via-gray-800 to-gray-900 admin-sidebar overflow-y-auto shadow-xl">
    <!-- Brand Header -->
    <div class="relative">
        <div class="flex items-center justify-center h-16 px-4 bg-gray-900 border-b border-gray-700">
            <div class="flex items-center space-x-2">
                <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-lg">
                    <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                    </svg>
                </div>
                <h1 class="text-lg font-bold text-white tracking-tight">
                    Admin Panel
                </h1>
            </div>
        </div>
        <!-- Subtle gradient overlay -->
        <div class="absolute inset-x-0 h-1 bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500"></div>
    </div>
    
    <!-- Admin User Profile -->
    <div class="px-4 py-6 border-b border-gray-700/50">
        <div class="flex items-center group">
            <div class="flex-shrink-0 relative">
                <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow duration-200">
                    <span class="text-sm font-semibold text-white">
                        {{ current_user.first_name[0] if current_user and current_user.first_name else 'A' }}
                    </span>
                </div>
                <!-- Online indicator -->
                <div class="absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-400 rounded-full border-2 border-gray-900"></div>
            </div>
            <div class="ml-3 flex-1 min-w-0">
                <p class="text-sm font-semibold text-white truncate">
                    {{ current_user.first_name if current_user else 'Admin' }} {{ current_user.last_name if current_user else 'User' }}
                </p>
                <p class="text-xs text-gray-400 truncate">{{ current_user.email if current_user else 'admin@example.com' }}</p>
                <div class="flex items-center mt-1">
                    <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800">
                        Administrator
                    </span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Main Navigation -->
    <nav class="flex-1 px-4 py-6 space-y-1">
        <!-- Primary Navigation -->
        <div class="space-y-1">
            <div class="px-3 py-2 text-xs font-semibold text-gray-400 uppercase tracking-wider">
                Core Features
            </div>
            
            <a href="/admin/" 
               class="admin-nav-item group {{ 'active bg-indigo-600 text-white shadow-md' if admin_section == 'dashboard' else 'text-gray-300 hover:text-white hover:bg-gray-700/50' }}">
                <div class="flex items-center">
                    <svg class="w-5 h-5 mr-3 {{ 'text-white' if admin_section == 'dashboard' else 'text-gray-400 group-hover:text-gray-300' }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m8 7 4-4 4 4"></path>
                    </svg>
                    <span class="font-medium">Dashboard</span>
                </div>
            </a>
            
            <a href="/admin/users" 
               class="admin-nav-item group {{ 'active bg-indigo-600 text-white shadow-md' if admin_section == 'users' else 'text-gray-300 hover:text-white hover:bg-gray-700/50' }}">
                <div class="flex items-center">
                    <svg class="w-5 h-5 mr-3 {{ 'text-white' if admin_section == 'users' else 'text-gray-400 group-hover:text-gray-300' }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path>
                    </svg>
                    <span class="font-medium">Users</span>
                </div>
            </a>
            
            <a href="/admin/households" 
               class="admin-nav-item group {{ 'active bg-indigo-600 text-white shadow-md' if admin_section == 'households' else 'text-gray-300 hover:text-white hover:bg-gray-700/50' }}">
                <div class="flex items-center">
                    <svg class="w-5 h-5 mr-3 {{ 'text-white' if admin_section == 'households' else 'text-gray-400 group-hover:text-gray-300' }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"></path>
                    </svg>
                    <span class="font-medium">Households</span>
                </div>
            </a>
            
            <a href="/admin/expenses" 
               class="admin-nav-item group {{ 'active bg-indigo-600 text-white shadow-md' if admin_section == 'expenses' else 'text-gray-300 hover:text-white hover:bg-gray-700/50' }}">
                <div class="flex items-center">
                    <svg class="w-5 h-5 mr-3 {{ 'text-white' if admin_section == 'expenses' else 'text-gray-400 group-hover:text-gray-300' }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path>
                    </svg>
                    <span class="font-medium">Expenses</span>
                </div>
            </a>
        </div>
        
        <!-- Analytics Section -->
        <div class="pt-6 space-y-1">
            <div class="px-3 py-2 text-xs font-semibold text-gray-400 uppercase tracking-wider">
                Analytics & Reports
            </div>
            
            <a href="/admin/analytics" 
               class="admin-nav-item group {{ 'active bg-indigo-600 text-white shadow-md' if admin_section == 'analytics' else 'text-gray-300 hover:text-white hover:bg-gray-700/50' }}">
                <div class="flex items-center">
                    <svg class="w-5 h-5 mr-3 {{ 'text-white' if admin_section == 'analytics' else 'text-gray-400 group-hover:text-gray-300' }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                    </svg>
                    <span class="font-medium">Analytics</span>
                </div>
                {% if admin_section == 'analytics' %}
                <div class="w-2 h-2 bg-white rounded-full"></div>
                {% endif %}
            </a>
        </div>
        
        <!-- Settings Section -->
        <div class="pt-6 space-y-1">
            <div class="px-3 py-2 text-xs font-semibold text-gray-400 uppercase tracking-wider">
                Configuration
            </div>
            
            <a href="/admin/settings" 
               class="admin-nav-item group {{ 'active bg-indigo-600 text-white shadow-md' if admin_section == 'settings' else 'text-gray-300 hover:text-white hover:bg-gray-700/50' }}">
                <div class="flex items-center">
                    <svg class="w-5 h-5 mr-3 {{ 'text-white' if admin_section == 'settings' else 'text-gray-400 group-hover:text-gray-300' }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    </svg>
                    <span class="font-medium">Settings</span>
                </div>
                {% if admin_section == 'settings' %}
                <div class="w-2 h-2 bg-white rounded-full"></div>
                {% endif %}
            </a>
        </div>
    </nav>
    
    <!-- Footer Actions -->
    <div class="border-t border-gray-700/50 p-4 space-y-1">
        <div class="px-3 py-2 text-xs font-semibold text-gray-400 uppercase tracking-wider">
            Quick Actions
        </div>
        
        <a href="/" 
           class="admin-nav-item text-gray-400 hover:text-gray-300 hover:bg-gray-700/30 group">
            <div class="flex items-center">
                <svg class="w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                </svg>
                <span class="font-medium">Back to App</span>
            </div>
        </a>
        
        <button onclick="performLogout()" 
                class="admin-nav-item text-gray-400 hover:text-red-300 hover:bg-red-900/20 group w-full text-left">
            <div class="flex items-center">
                <svg class="w-5 h-5 mr-3 text-gray-400 group-hover:text-red-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                </svg>
                <span class="font-medium">Logout</span>
            </div>
        </button>
    </div>
</aside>

<style>
    /* Enhanced sidebar styles */
    .admin-sidebar {
        scrollbar-width: thin;
        scrollbar-color: #6b7280 #374151;
    }
    
    .admin-sidebar::-webkit-scrollbar {
        width: 6px;
    }
    
    .admin-sidebar::-webkit-scrollbar-track {
        background: #374151;
        border-radius: 3px;
    }
    
    .admin-sidebar::-webkit-scrollbar-thumb {
        background: #6b7280;
        border-radius: 3px;
    }
    
    .admin-sidebar::-webkit-scrollbar-thumb:hover {
        background: #9ca3af;
    }
    
    /* Enhanced navigation items */
    .admin-nav-item {
        @apply flex items-center justify-between px-3 py-2.5 text-sm rounded-lg transition-all duration-200 ease-in-out;
        min-height: 40px; /* Ensure consistent height */
    }
    
    .admin-nav-item:hover {
        transform: translateX(2px);
    }
    
    .admin-nav-item.active {
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    }
    
    /* Ensure proper flex behavior for nav items */
    .admin-nav-item > div:first-child {
        flex: 1;
        min-width: 0; /* Prevent flex item from overflowing */
    }
    
    /* Subtle animations */
    .admin-nav-item svg {
        transition: transform 0.2s ease-in-out;
        flex-shrink: 0; /* Prevent icon from shrinking */
    }
    
    .admin-nav-item:hover svg {
        transform: scale(1.05);
    }
</style> 